/* CSS Level 3 Comprehensive Test */

/* CSS3 Selectors */
/* Attribute selectors */
input[type="text"] { border: 1px solid #ccc; }
input[type^="text"] { background: #f9f9f9; }
input[type$="box"] { padding: 5px; }
input[type*="search"] { border-radius: 20px; }

/* Pseudo-classes */
:nth-child(odd) { background: #f0f0f0; }
:nth-child(2n+1) { color: #333; }
:nth-of-type(3) { font-weight: bold; }
:first-of-type { margin-top: 0; }
:last-of-type { margin-bottom: 0; }
:only-child { text-align: center; }
:not(.exclude) { display: block; }
:target { background: yellow; }
:enabled { cursor: pointer; }
:disabled { opacity: 0.5; }
:checked { background: green; }

/* Pseudo-elements */
::before { content: "→ "; }
::after { content: " ←"; }
::first-line { font-weight: bold; }
::first-letter { font-size: 2em; float: left; }
::selection { background: #007bff; color: white; }

/* CSS3 Box Model */
.box-sizing {
    box-sizing: border-box;
}

.box-sizing.content-box {
    box-sizing: content-box;
}

.box-sizing.padding-box {
    box-sizing: padding-box;
}

/* CSS3 Backgrounds */
.backgrounds {
    /* Multiple backgrounds */
    background: url("bg1.png") no-repeat top left,
                url("bg2.jpg") repeat-x bottom,
                linear-gradient(to bottom, #fff, #eee);
    
    /* Background size */
    background-size: cover, contain, 100% 50%;
    
    /* Background origin and clip */
    background-origin: padding-box, border-box, content-box;
    background-clip: border-box, padding-box, content-box;
    
    /* Background attachment */
    background-attachment: fixed, scroll, local;
}

.backgrounds.alt-size {
    background-size: auto, 200px 100px;
}

/* CSS3 Borders */
.borders {
    /* Border radius */
    border-radius: 10px;
    border-top-left-radius: 8px;
    border-top-right-radius: 12px;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 14px;
    
    /* Border images */
    border-image: url("border.png") 30 round;
    border-image-source: url("border.svg");
    border-image-slice: 30 fill;
    border-image-width: 1;
    border-image-outset: 0;
    border-image-repeat: stretch, repeat, round, space;
    
    /* Box shadow */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.borders.two-values {
    border-radius: 10px 20px;
}

.borders.four-values {
    border-radius: 5px 10px 15px 20px;
}

.borders.multiple-shadows {
    box-shadow: inset 0 1px 2px #ccc, 0 4px 8px rgba(0,0,0,0.2);
}

.borders.colored-shadows {
    box-shadow: 2px 2px 4px red, -2px -2px 4px blue;
}

/* CSS3 Colors */
.colors {
    /* RGBA */
    color: rgba(255, 0, 0, 0.5);
    background: rgba(0, 255, 0, 0.8);
    
    /* HSLA */
    border-color: hsla(240, 100%, 50%, 0.7);
    box-shadow: 0 0 10px hsla(120, 80%, 40%, 0.6);
    
    /* Opacity */
    opacity: 0.75;
}

/* CSS3 Text Effects */
.text-effects {
    /* Text shadow */
    text-shadow: 1px 1px 2px #000;
    
    /* Text overflow */
    text-overflow: ellipsis;
    
    /* Word wrap */
    word-wrap: break-word;
    
    /* White space */
    white-space: nowrap;
}

.text-effects.multiple-shadows {
    text-shadow: 0 0 5px red, 2px 2px 3px blue;
}

.text-effects.clip {
    text-overflow: clip;
}

.text-effects.normal-wrap {
    word-wrap: normal;
}

.text-effects.pre-wrap {
    white-space: pre-wrap;
}

.text-effects.pre-line {
    white-space: pre-line;
}

/* CSS3 Fonts */
@font-face {
    font-family: "CustomFont";
    src: url("font.woff2") format("woff2"),
         url("font.woff") format("woff"),
         url("font.ttf") format("truetype");
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

.fonts {
    font-family: "CustomFont", Arial, sans-serif;
    font-size: 1.2rem;
    font-weight: 300;
    font-stretch: condensed;
    font-variant: small-caps;
}

/* CSS3 Transforms */
.transforms {
    /* 2D Transforms */
    transform: translate(50px, 100px);
    
    /* Transform origin */
    transform-origin: center;
    
    /* Transform style */
    transform-style: preserve-3d;
    
    /* Perspective */
    perspective: 500px;
    perspective-origin: center;
    
    /* Backface visibility */
    backface-visibility: visible;
}

.transforms.translate-x {
    transform: translateX(20px);
}

.transforms.translate-y {
    transform: translateY(-30px);
}

.transforms.scale {
    transform: scale(1.5);
}

.transforms.scale-x {
    transform: scaleX(2);
}

.transforms.scale-y {
    transform: scaleY(0.5);
}

.transforms.rotate {
    transform: rotate(45deg);
}

.transforms.skew {
    transform: skew(30deg, 20deg);
}

.transforms.skew-x {
    transform: skewX(15deg);
}

.transforms.skew-y {
    transform: skewY(-10deg);
}

.transforms.matrix {
    transform: matrix(1, 0, 0, 1, 50, 100);
}

.transforms.combined {
    transform: translate(50px, 50px) rotate(45deg) scale(1.2);
}

.transforms.origin-top-left {
    transform-origin: top left;
}

.transforms.origin-percent {
    transform-origin: 50% 25%;
}

.transforms.origin-pixels {
    transform-origin: 10px 20px;
}

.transforms.translate-3d {
    transform: translate3d(10px, 20px, 30px);
}

.transforms.translate-z {
    transform: translateZ(50px);
}

.transforms.scale-3d {
    transform: scale3d(1.2, 1.5, 0.8);
}

.transforms.scale-z {
    transform: scaleZ(2);
}

.transforms.rotate-3d {
    transform: rotate3d(1, 1, 1, 45deg);
}

.transforms.rotate-x {
    transform: rotateX(30deg);
}

.transforms.rotate-y {
    transform: rotateY(60deg);
}

.transforms.rotate-z {
    transform: rotateZ(90deg);
}

.transforms.perspective-transform {
    transform: perspective(1000px);
}

.transforms.flat {
    transform-style: flat;
}

.transforms.perspective-percent {
    perspective-origin: 25% 75%;
}

.transforms.backface-hidden {
    backface-visibility: hidden;
}

/* CSS3 Transitions */
.transitions {
    transition: all 0.3s ease;
    
    /* Individual properties */
    transition-property: opacity, transform;
    transition-duration: 0.3s, 0.5s;
    transition-timing-function: ease, ease-in-out;
    transition-delay: 0s, 0.1s;
}

.transitions.opacity {
    transition: opacity 0.5s linear;
}

.transitions.transform {
    transition: transform 0.2s ease-in-out;
}

.transitions.width {
    transition: width 1s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.transitions.multiple {
    transition: opacity 0.3s ease, transform 0.5s ease-in-out, color 0.2s linear;
}

/* CSS3 Animations */
@keyframes fadeIn {
    0% { opacity: 0; transform: translateY(-20px); }
    50% { opacity: 0.5; transform: translateY(-10px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-30px); }
    60% { transform: translateY(-15px); }
}

.animations {
    animation: fadeIn 1s ease-in-out;
    
    /* Individual properties */
    animation-name: fadeIn;
    animation-duration: 2s;
    animation-timing-function: ease-in-out;
    animation-delay: 0.5s;
    animation-iteration-count: infinite;
    animation-direction: normal;
    animation-fill-mode: none;
    animation-play-state: running;
}

.animations.spin {
    animation: spin 2s linear infinite;
}

.animations.bounce {
    animation: bounce 1.5s ease-in-out infinite alternate;
}

.animations.multiple {
    animation: fadeIn 1s ease-in-out, spin 2s linear infinite;
}

.animations.three-iterations {
    animation-iteration-count: 3;
}

.animations.reverse {
    animation-direction: reverse;
}

.animations.alternate {
    animation-direction: alternate;
}

.animations.alternate-reverse {
    animation-direction: alternate-reverse;
}

.animations.forwards {
    animation-fill-mode: forwards;
}

.animations.backwards {
    animation-fill-mode: backwards;
}

.animations.both {
    animation-fill-mode: both;
}

.animations.paused {
    animation-play-state: paused;
}

/* CSS3 Layout: Flexbox */
.flexbox {
    display: flex;
    
    /* Flex direction */
    flex-direction: row;
    
    /* Flex wrap */
    flex-wrap: nowrap;
    
    /* Flex flow (shorthand) */
    flex-flow: row wrap;
    
    /* Justify content */
    justify-content: flex-start;
    
    /* Align items */
    align-items: stretch;
    
    /* Align content */
    align-content: stretch;
}

.flexbox.inline {
    display: inline-flex;
}

.flexbox.row-reverse {
    flex-direction: row-reverse;
}

.flexbox.column {
    flex-direction: column;
}

.flexbox.column-reverse {
    flex-direction: column-reverse;
}

.flexbox.wrap {
    flex-wrap: wrap;
}

.flexbox.wrap-reverse {
    flex-wrap: wrap-reverse;
}

.flexbox.column-nowrap {
    flex-flow: column nowrap;
}

.flexbox.flex-end {
    justify-content: flex-end;
}

.flexbox.center {
    justify-content: center;
}

.flexbox.space-between {
    justify-content: space-between;
}

.flexbox.space-around {
    justify-content: space-around;
}

.flexbox.space-evenly {
    justify-content: space-evenly;
}

.flexbox.align-flex-start {
    align-items: flex-start;
}

.flexbox.align-flex-end {
    align-items: flex-end;
}

.flexbox.align-center {
    align-items: center;
}

.flexbox.align-baseline {
    align-items: baseline;
}

.flexbox.content-flex-start {
    align-content: flex-start;
}

.flexbox.content-flex-end {
    align-content: flex-end;
}

.flexbox.content-center {
    align-content: center;
}

.flexbox.content-space-between {
    align-content: space-between;
}

.flexbox.content-space-around {
    align-content: space-around;
}

.flex-item {
    /* Flex properties */
    flex: 1;
    
    /* Individual flex properties */
    flex-grow: 1;
    flex-shrink: 0;
    flex-basis: 200px;
    
    /* Align self */
    align-self: auto;
    
    /* Order */
    order: 0;
}

.flex-item.shorthand-0-1-auto {
    flex: 0 1 auto;
}

.flex-item.shorthand-2-0-200px {
    flex: 2 0 200px;
}

.flex-item.basis-auto {
    flex-basis: auto;
}

.flex-item.basis-content {
    flex-basis: content;
}

.flex-item.self-flex-start {
    align-self: flex-start;
}

.flex-item.self-flex-end {
    align-self: flex-end;
}

.flex-item.self-center {
    align-self: center;
}

.flex-item.self-baseline {
    align-self: baseline;
}

.flex-item.self-stretch {
    align-self: stretch;
}

.flex-item.order-1 {
    order: 1;
}

.flex-item.order-negative {
    order: -1;
}

/* CSS3 Layout: Grid (CSS Grid Level 1, part of CSS3 era) */
.grid {
    display: grid;
    
    /* Grid template */
    grid-template-columns: 1fr 2fr 1fr;
    grid-template-rows: 100px 1fr 50px;
    
    /* Grid gap */
    grid-gap: 10px;
    grid-column-gap: 15px;
    grid-row-gap: 25px;
    
    /* Grid areas */
    grid-template-areas: 
        "header header header"
        "sidebar main main"
        "footer footer footer";
}

.grid.inline {
    display: inline-grid;
}

.grid.repeat-columns {
    grid-template-columns: repeat(3, 1fr);
}

.grid.mixed-columns {
    grid-template-columns: 100px auto 50px;
}

.grid.minmax-columns {
    grid-template-columns: minmax(100px, 1fr) 200px;
}

.grid.auto-fit-rows {
    grid-template-rows: repeat(auto-fit, minmax(100px, 1fr));
}

.grid.gap-two-values {
    grid-gap: 10px 20px;
}

.grid-item {
    /* Grid placement */
    grid-column: 1 / 3;
    grid-row: 2 / 4;
    
    /* Grid area */
    grid-area: header;
    
    /* Individual placement */
    grid-column-start: 1;
    grid-column-end: 3;
    grid-row-start: 2;
    grid-row-end: span 2;
}

.grid-item.span-column {
    grid-column: span 2;
}

.grid-item.span-row {
    grid-row: span 1;
}

.grid-item.area-coordinates {
    grid-area: 1 / 2 / 3 / 4;
}

/* CSS3 Multi-column Layout */
.columns {
    column-count: 3;
    column-width: 200px;
    columns: 3 200px;
    
    column-gap: 30px;
    column-rule: 2px solid #ccc;
    column-rule-width: 1px;
    column-rule-style: dotted;
    column-rule-color: #999;
    
    column-fill: auto;
    
    column-span: all;
}

.columns.balance {
    column-fill: balance;
}

.columns.span-none {
    column-span: none;
}

/* CSS3 Media Queries */
@media screen and (max-width: 768px) {
    .responsive { font-size: 14px; }
}

@media print and (min-resolution: 300dpi) {
    .print-hq { color: black; }
}

@media (orientation: landscape) {
    .landscape { width: 100%; }
}

@media (min-aspect-ratio: 16/9) {
    .widescreen { background: #000; }
}

@media (hover: hover) and (pointer: fine) {
    .hover-capable:hover { background: #f0f0f0; }
}

/* CSS3 Gradients */
.gradients {
    /* Linear gradients */
    background: linear-gradient(to right, red, blue);
}

.gradients.linear-45deg {
    background: linear-gradient(45deg, #ff0000, #00ff00, #0000ff);
}

.gradients.linear-transparent {
    background: linear-gradient(to bottom right, rgba(255,0,0,0.5), transparent);
}

.gradients.radial-circle {
    background: radial-gradient(circle, red, blue);
}

.gradients.radial-ellipse {
    background: radial-gradient(ellipse at center, #ff0000 0%, #00ff00 50%, #0000ff 100%);
}

.gradients.radial-closest-side {
    background: radial-gradient(closest-side at 30% 40%, red, blue);
}

.gradients.repeating-linear {
    background: repeating-linear-gradient(45deg, red 0px, red 10px, blue 10px, blue 20px);
}

.gradients.repeating-radial {
    background: repeating-radial-gradient(circle, red 0px, red 10px, blue 10px, blue 20px);
}

/* CSS3 Filters */
.filters {
    filter: blur(5px);
}

.filters.brightness {
    filter: brightness(0.8);
}

.filters.contrast {
    filter: contrast(150%);
}

.filters.drop-shadow {
    filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
}

.filters.grayscale {
    filter: grayscale(100%);
}

.filters.hue-rotate {
    filter: hue-rotate(90deg);
}

.filters.invert {
    filter: invert(75%);
}

.filters.opacity {
    filter: opacity(50%);
}

.filters.saturate {
    filter: saturate(200%);
}

.filters.sepia {
    filter: sepia(60%);
}

.filters.multiple {
    filter: blur(2px) brightness(0.9) contrast(120%);
}

.filters.backdrop-blur {
    backdrop-filter: blur(10px);
}

.filters.backdrop-mixed {
    backdrop-filter: brightness(0.8) saturate(120%);
}

/* CSS3 Miscellaneous */
.misc {
    /* Resize */
    resize: both;
    
    /* Overflow */
    overflow-x: hidden;
    overflow-y: scroll;
    overflow: auto;
    
    /* Outline */
    outline: 2px solid red;
    outline-offset: 4px;
    
    /* Cursor */
    cursor: pointer;
    
    /* User select */
    user-select: none;
    
    /* Pointer events */
    pointer-events: none;
    
    /* Tab size */
    tab-size: 4;
    
    /* Hyphens */
    hyphens: auto;
    
    /* Text align last */
    text-align-last: center;
    
    /* Writing mode */
    writing-mode: horizontal-tb;
    
    /* Text orientation */
    text-orientation: mixed;
}

.misc.resize-horizontal {
    resize: horizontal;
}

.misc.resize-vertical {
    resize: vertical;
}

.misc.resize-none {
    resize: none;
}

.misc.cursor-grab {
    cursor: grab;
}

.misc.cursor-grabbing {
    cursor: grabbing;
}

.misc.cursor-zoom-in {
    cursor: zoom-in;
}

.misc.cursor-zoom-out {
    cursor: zoom-out;
}

.misc.user-select-text {
    user-select: text;
}

.misc.user-select-all {
    user-select: all;
}

.misc.pointer-events-auto {
    pointer-events: auto;
}

.misc.tab-size-2 {
    tab-size: 2;
}

.misc.hyphens-manual {
    hyphens: manual;
}

.misc.hyphens-none {
    hyphens: none;
}

.misc.text-align-last-justify {
    text-align-last: justify;
}

.misc.writing-mode-vertical-rl {
    writing-mode: vertical-rl;
}

.misc.writing-mode-vertical-lr {
    writing-mode: vertical-lr;
}

.misc.text-orientation-upright {
    text-orientation: upright;
}

.misc.text-orientation-sideways {
    text-orientation: sideways;
}

/* CSS3 Calc() function */
.calc {
    width: calc(100% - 20px);
    height: calc(100vh - 50px);
    margin: calc(1rem + 5px) auto;
    font-size: calc(1rem + 2vw);
    
    /* Complex calc expressions */
    padding: calc((100% - 960px) / 2);
    top: calc(50% - 25px);
}

/* CSS3 Custom Properties (CSS Variables) */
:root {
    --primary-color: #007bff;
    --secondary-color: #6c757d;
    --font-size-base: 1rem;
    --border-radius: 4px;
    --box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.variables {
    color: var(--primary-color);
    background: var(--secondary-color, #ccc);
    font-size: var(--font-size-base);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    
    /* Nested variable usage */
    border: 2px solid var(--primary-color);
    padding: calc(var(--font-size-base) * 0.5);
}

/* CSS3 Feature Queries */
@supports (display: grid) {
    .grid-supported {
        display: grid;
        grid-template-columns: 1fr 1fr;
    }
}

@supports (backdrop-filter: blur(10px)) {
    .backdrop-blur {
        backdrop-filter: blur(10px);
    }
}

@supports not (display: flex) {
    .no-flex {
        display: table;
    }
}

@supports (display: flex) and (backdrop-filter: blur(10px)) {
    .modern-browser {
        display: flex;
        backdrop-filter: blur(5px);
    }
}
