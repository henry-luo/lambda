#!/usr/bin/env lambda

# Test JSON parser with error tracking

# Test 1: Valid JSON
let valid_json = input('{"name": "test", "value": 42, "array": [1, 2, 3]}', 'json')
print("Test 1 - Valid JSON:")
print(valid_json)
print("")

# Test 2: JSON with unterminated string (should report error)
let bad_string = input('{"name": "unterminated}', 'json')
print("Test 2 - Unterminated string:")
print(bad_string)
print("")

# Test 3: JSON with invalid escape
let bad_escape = input('{"text": "invalid\\xescape"}', 'json')
print("Test 3 - Invalid escape (should warn):")
print(bad_escape)
print("")

# Test 4: JSON with multiple errors
let multiple_errors = input('{
    "key1": "unterminated,
    "key2" 123,
    "key3": [1, 2 3],
}', 'json')
print("Test 4 - Multiple errors:")
print(multiple_errors)
print("")

# Test 5: Valid complex JSON
let complex_json = input('{
    "user": {
        "name": "John Doe",
        "age": 30,
        "email": "john@example.com"
    },
    "items": [
        {"id": 1, "name": "Item 1"},
        {"id": 2, "name": "Item 2"}
    ],
    "active": true,
    "metadata": null
}', 'json')
print("Test 5 - Complex valid JSON:")
print(complex_json)
