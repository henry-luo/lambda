<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Table Edge Cases Test</title>
  <style>
    body { margin: 16px; font-family: Arial, sans-serif; }
    table { 
      border-collapse: separate; 
      border-spacing: 0; 
      margin-bottom: 30px;
    }
    th, td { 
      padding: 8px 12px; 
      border: 1px solid #666; 
      background: #fff; 
    }
    thead th { background: #f0f0f0; }
    caption { caption-side: top; font-weight: bold; margin-bottom: 8px; }
    
    .empty-cell { background: #ffe6e6; }
    .overflow-text { 
      max-width: 100px; 
      overflow: hidden; 
      text-overflow: ellipsis; 
      white-space: nowrap; 
    }
  </style>
</head>
<body>
  <table>
    <caption>Empty Cells and Missing Content</caption>
    <thead>
      <tr>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>Column 3</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Normal content</td>
        <td class="empty-cell"></td>
        <td>More content</td>
      </tr>
      <tr>
        <td class="empty-cell"></td>
        <td class="empty-cell"></td>
        <td>Only this cell has content</td>
      </tr>
      <tr>
        <td>Content</td>
        <td>&nbsp;</td>
        <td>Non-breaking space</td>
      </tr>
    </tbody>
  </table>

  <table>
    <caption>Extreme Colspan/Rowspan Values</caption>
    <thead>
      <tr>
        <th colspan="5">Full Width Header (5 columns)</th>
      </tr>
      <tr>
        <th>A</th>
        <th>B</th>
        <th>C</th>
        <th>D</th>
        <th>E</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td rowspan="4">Tall Cell (4 rows)</td>
        <td>B1</td>
        <td colspan="3">Wide Cell (3 columns)</td>
      </tr>
      <tr>
        <td>B2</td>
        <td>C2</td>
        <td>D2</td>
        <td>E2</td>
      </tr>
      <tr>
        <td colspan="2">Medium Span (2 cols)</td>
        <td>D3</td>
        <td>E3</td>
      </tr>
      <tr>
        <td>B4</td>
        <td>C4</td>
        <td colspan="2">Another Medium Span</td>
      </tr>
    </tbody>
  </table>

  <table>
    <caption>Single Cell Table</caption>
    <tbody>
      <tr>
        <td>This table has only one cell</td>
      </tr>
    </tbody>
  </table>

  <table>
    <caption>Very Long Text Content</caption>
    <thead>
      <tr>
        <th>Short</th>
        <th>Long Content</th>
        <th>Overflow</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>A</td>
        <td>This is an extremely long piece of text that should test how the table layout algorithm handles content that is much longer than typical cell content and might cause width calculation issues</td>
        <td class="overflow-text">This text should be truncated with ellipsis due to CSS overflow settings</td>
      </tr>
      <tr>
        <td>B</td>
        <td>Supercalifragilisticexpialidocious antidisestablishmentarianism pneumonoultramicroscopicsilicovolcanoconiosisfloccinaucinihilipilification</td>
        <td>Normal</td>
      </tr>
    </tbody>
  </table>

  <table>
    <caption>Irregular Row Structure</caption>
    <tbody>
      <tr>
        <td>Row with 1 cell</td>
      </tr>
      <tr>
        <td>Row with</td>
        <td>2 cells</td>
      </tr>
      <tr>
        <td>Row with</td>
        <td>three</td>
        <td>cells</td>
      </tr>
      <tr>
        <td>And back to</td>
        <td>2 cells</td>
      </tr>
    </tbody>
  </table>
</body>
</html>
